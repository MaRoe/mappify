!function(){"use strict";function e(){return function(e){return e}}function t(e,t){e.state("root",{url:"/",views:{sidebar:{controller:"SidebarController",controllerAs:"sidebar",templateUrl:"/subsection-sidebar/sidebar.tpl.html"},map:{controller:"MainController",controllerAs:"main",templateUrl:"/subsection-main/main.tpl.html"}}}),t.otherwise("/")}function a(){}angular.module("mappifyApp",["mappifyApp.sidebar","mappifyApp.main","zenubu.ngStrap","mappify","ui.router"]).controller("AppCtrl",a).filter("translate",e).config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),angular.module("mappifyApp").run(["$templateCache",function(e){e.put("/subsection-main/main.tpl.html","<div ng-if=main.showMap><mappify id=map datasource=main.datasource config=main.config></mappify></div>"),e.put("/subsection-sidebar/sidebar.tpl.html",'<div class=col-xs-12><div class="h3 text-center">Mappify</div><br></div><div class=clearfix></div><ul class=navigation><li><a href=# ng-click=sidebar.changeLayout()><i class="fa fa-fw fa-location-arrow"></i>Change Zoom/Center</a></li><li><a href=# ng-click=sidebar.changeTileLayers()><i class="fa fa-fw fa-globe"></i>Change TileLayers</a></li><li><a href="" ng-click=sidebar.loadConfig()><i class="fa fa-fw fa-cloud-upload"></i>Load Config</a></li><li><a ng-click=sidebar.downloadConfig()><i class="fa fa-fw fa-cloud-download"></i>Download Config</a></li><li><a ng-click=sidebar.changeDataSource()><i class="fa fa-fw fa-database"></i>Change DataSource</a></li><li><a ng-click=sidebar.changeDataSource()><i class="fa fa-fw fa-cog"></i>Map Settings</a></li><li><a ng-click=sidebar.selectMarkerStyle()><i class="fa fa-fw fa-map-marker"></i>Select Marker Style</a></li></ul><div class=col-xs-12><hr><button href=/subscribe class="btn btn-primary btn-block text-left"><i class="fa fa-fw fa-cogs"></i> Generate Files</button></div><div class=col-xs-12 style="position: absolute; bottom: 15px"><button class="btn btn-info btn-block text-left" ng-click=main.refreshConfig() id=refreshButton><i class="fa fa-fw fa-refresh"></i> Refresh map</button><hr><button class="btn btn-block text-left" ng-class="(main.autoRefresh)?\'btn-success\':\'btn-warning\'" ng-click=main.refreshConfig() id=autoRefresh><i class="fa fa-fw" ng-class="(main.autoRefresh)?\'fa-toggle-on\':\'fa-toggle-off\'"></i> Autorefresh <span ng-if=main.autoRefresh>on</span> <span ng-if=!main.autoRefresh>off</span></button></div>'),e.put("/bower_components/angular-bootstrap-forms/src/zenubuForm.tpl.html","<form name=Form ng-submit=submit() novalidate><div ng-transclude></div></form>"),e.put("/bower_components/angular-bootstrap-forms/src/zenubuInput.tpl.html","<ng-form name=innerForm><div ng-class=\"{'has-error' : hasError()}\" class=\"form-group has-feedback\"><label ng-if=label>{{label}}</label><div ng-class=\"{'input-group' : inputGroup}\"><input type={{validation.type}} class=form-control name=input ng-class=\"{'input-lg': large}\" ng-if=!sameAs ng-trim=false ng-model=model[field] ng-maxlength={{validation.maxLength}} ng-minlength={{validation.minLength}} ng-change=change validator-regex={{validation.regex.pattern}} max={{validation.max}} min={{validation.min}} ng-required={{validation.required}} placeholder=\"{{ placeholder |translate }}\"> <input type={{validation.type}} class=form-control name=input ng-if=!!sameAs ng-change=change ng-trim=false ng-model=model[field] password-verify=model[sameAs] ng-maxlength={{validation.maxLength}} ng-minlength={{validation.minLength}} max={{validation.max}} min={{validation.min}} ng-required=validation.required placeholder=\"{{ placeholder |translate }}\"> <span class=\"fa fa-fw fa-asterisk single-input-feedback\" ng-class=\"{'text-danger' : hasError()}\" ng-if=validation.required focus-input></span></div><p ng-if=hasError() class=help-block><label class=control-label><span ng-show=innerForm.input.$error.validatorRegex>{{ validation.regex.error | translate }}</span> <span ng-show=innerForm.input.$error.email>{{ 'EMAIL_ERROR' | translate }}</span> <span ng-show=innerForm.input.$error.number>{{ 'NUMBER_ERROR' | translate }}</span> <span ng-show=innerForm.input.$error.required>{{ 'REQUIRED_ERROR' | translate }}</span> <span ng-show=innerForm.input.$error.maxlength>{{ 'MAXLENGTH_ERROR' | translate:{length:validation.maxLength} }}</span> <span ng-show=innerForm.input.$error.minlength>{{ 'MINLENGTH_ERROR' | translate:{length:validation.minLength} }}</span> <span ng-show=innerForm.input.$error.max>{{ 'MAX_ERROR' | translate:{length:validation.max} }}</span> <span ng-show=innerForm.input.$error.min>{{ 'MIN_ERROR' | translate:{length:validation.min} }}</span> <span ng-show=innerForm.input.$error.passwordVerify>{{ 'PASSWORD_NO_MATCH' | translate }}</span></label></p></div></ng-form>"),e.put("/bower_components/angular-bootstrap-forms/src/zenubuReset.tpl.html",'<a class="btn btn-primary no-icon" ng-click=reset() ng-disabled="isSaving() || isPristine() || disabled"><span ng-transclude></span></a>'),e.put("/bower_components/angular-bootstrap-forms/src/zenubuSelect.tpl.html",'<div><div ng-switch=validation.type ng-class="{\'has-error\' : hasError()}" class="form-group has-feedback"><div ng-switch-when=array><ui-select ng-model=model[field] theme=bootstrap ng-required={{validation.required}}><ui-select-match placeholder="{{ placeholder |translate }}">{{ $select.selected}}</ui-select-match><ui-select-choices repeat="item in valueObject | filter: $select.search"><div ng-bind-html="item | highlight: $select.search"></div></ui-select-choices></ui-select></div><div ng-switch-when=translatableArray><ui-select ng-model=model[field] theme=bootstrap ng-required={{validation.required}}><ui-select-match placeholder="{{ placeholder |translate }}">{{ translatablePrefix + $select.selected.code | translate}}</ui-select-match><ui-select-choices repeat="item.code as item in valueObject | filter: $select.search"><div ng-bind-html=" item.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><span class=select-feedback ng-if=validation.required focus-select ng-class="{\'text-danger\' : hasError()}"><i class="fa fa-fw fa-sort"></i> <i class="fa fa-fw fa-asterisk single-input-feedback"></i></span> <span class="fa fa-fw fa-sort single-input-feedback" ng-class="{\'text-danger\' : hasError()}" ng-if=!validation.required focus-select></span><div ng-if=hasError() class=help-block><label class=control-label><span>{{ \'REQUIRED_ERROR\' | translate }}</span></label></div></div></div>'),e.put("/bower_components/angular-bootstrap-forms/src/zenubuSubmit.tpl.html",'<button type=submit class="btn btn-primary no-icon" ng-disabled="isSaving() || disabled"><span ng-transclude></span></button>'),e.put("/subsection-sidebar/modals/dataSource/dataSource.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header>DataSource <i class="fa fa-times close" ng-click=modal.cancel()></i></div><div class=modal-body><label>displayName</label><input ng-model="modal.ds.displayName"><h6>service</h6><div ng-repeat="service in modal.availableServices"><div ng-click=modal.toggleServiceSelection(service.id) ng-class="modal.isServiceSelected(service.id) ? \'bg-warning\' : \'\'" style="height: 100px; width: 100px">{{service.displayName}}</div></div><label>concept</label><select></select><input ng-model=modal.ds.concept placeholder="http://dbpedia.org/ontology/University"></div><div class=modal-footer><button class="btn btn-success" ng-click=modal.close()><i class="fa fa-fw fa-save"></i> Save</button></div></div></div></div>'),e.put("/subsection-sidebar/modals/download/download.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header>download json <i class="fa fa-times close" ng-click=modal.cancel()></i></div><div class=modal-body><textarea>\n                    {{modal.config | json}}\n                </textarea><a class=list-group-item ng-href="{{ modal.blobURL }}" download=config.json target=_blank>download - link</a></div><div class=modal-footer><button class="btn btn-success" ng-click=modal.close()><i class="fa fa-fw fa-save"></i> Save</button></div></div></div></div>'),e.put("/subsection-sidebar/modals/layout/layout.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header>Layout <i class="fa fa-times close" ng-click=modal.cancel()></i></div><zenubu-form submit-function=modal.close model=modal.layout validation-object={}><div class=modal-body><div class=row><zenubu-input class=col-xs-4 field=lat placeholder=Latitude label=Latitude></zenubu-input><zenubu-input class=col-xs-4 field=lng placeholder=Longitude label=Longitude></zenubu-input><zenubu-input class=col-xs-4 field=zoom placeholder=Zoom label=Zoom></zenubu-input></div><div style="margin-bottom: 5px"><strong>Preview</strong></div><div id=map-preview-image style="background: url(images/preview.png) no-repeat center center; height:300px; width: 100%"></div></div><div class=modal-footer><zenubu-submit class=btn-success><i class="fa fa-fw fa-save"></i> Save</zenubu-submit></div></zenubu-form></div></div></div>'),e.put("/subsection-sidebar/modals/load/load.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header>Load Json <i class="fa fa-times close" ng-click=modal.cancel()></i></div><div class=modal-body><textarea ng-model=modal.json>\n\n                </textarea></div><div class=modal-footer><button class="btn btn-success" ng-click=modal.close()><i class="fa fa-fw fa-save"></i> Save</button></div></div></div></div>'),e.put("/subsection-sidebar/modals/markerStyle/markerStyle.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header>Define your marker style <i class="fa fa-times close" ng-click=modal.cancel()></i></div><div class=modal-body style="font-size: 14px; color: #333"><div class=col-xs-12 style="padding: 0"><div><label style=width:70px>icon</label><i class="fa fa-fw" ng-class="\'fa-\'+ modal.icon" style="width: 30px;font-size: 18px; padding: 4px; margin: 4px"></i></div><div><label style=width:70px>colors</label><span style="border: 1px solid #c3c3c3; height: 20px; width: 30px; background-color: {{modal.selectedColor}}">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> &nbsp;&nbsp; <span style="border: 1px solid #c3c3c3; height: 20px; width: 30px; background-color: {{modal.unSelectedColor}}">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><hr></div><h5><strong>Available icons</strong></h5><div class=col-xs-12 style="padding: 0"><input class=form-control ng-model=modal.search.$ placeholder="filter the icon list"></div><div class=clearfix></div><div class=iconBox style="height: 300px; width: 100%; overflow-y: scroll; display: flex;flex-flow: row wrap;justify-content: space-between;align-content: flex-start"><span ng-repeat="icon in modal.availableMarkerStyles | filter : modal.search " style="cursor: pointer" ng-click="modal.icon = icon.id"><i class="fa fa-fw" ng-class="\'fa-\' + icon.id" style="width: 30px;margin-bottom: 4px; font-size: 18px; flex-grow:1; padding: 4px; border: 1px solid black; text-align: center"></i></span></div></div><div class=modal-footer><button class="btn btn-success" ng-click=modal.close()><i class="fa fa-fw fa-save"></i> Save</button></div></div></div></div>'),e.put("/subsection-sidebar/modals/tileLayer/tileLayer.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header>Tile Layer <i class="fa fa-times close" ng-click=modal.cancel()></i></div><div class=modal-body><label style="margin-bottom: 15px">Please select the tile layers your map should provide.</label><div class=row><div class=col-xs-6 ng-repeat="(key,val) in modal.availableTileLayer.google"><div class=tile-layer-preview style=background-image:url(images/{{key}}.png) ng-click="modal.tl.google[key] = !modal.tl.google[key]"><div class=preview-inactive ng-if=!modal.tl.google[key]></div><span class=badge>Google: {{key}}</span> <span class=fa-stack><i class="fa fa-3x fa-circle fa-stack-1x" style="color: white"></i> <i class="fa fa-3x fa-stack-1x" ng-class="(modal.tl.google[key])?\'fa-check-circle-o text-success\':\'fa-times-circle-o text-danger\'"></i></span></div></div><div class=col-xs-6><div class=tile-layer-preview style=background-image:url(images/osm.png) ng-click="modal.tl.osm.standard = !modal.tl.osm.standard"><div class=preview-inactive ng-if=!modal.tl.osm.standard></div><span class=badge>osm: standard</span> <span class=fa-stack><i class="fa fa-3x fa-circle fa-stack-1x" style="color: white"></i> <i class="fa fa-3x fa-stack-1x" ng-class="(modal.tl.osm.standard)?\'fa-check-circle-o text-success\':\'fa-times-circle-o text-danger\'"></i></span></div></div></div></div><div class=clearfix></div><div class=modal-footer><button class="btn btn-success" ng-click=modal.close()><i class="fa fa-fw fa-save"></i> Save</button></div></div></div></div>'),e.put("/bower_components/angular-strap/src/alert/alert.tpl.html","<div class=alert ng-class=\"[type ? 'alert-' + type : null]\"><button type=button class=close ng-if=dismissable ng-click=$hide()>&times;</button> <strong ng-bind=title></strong>&nbsp;<span ng-bind-html=content></span></div>"),e.put("/bower_components/angular-strap/src/aside/aside.tpl.html",'<div class=aside tabindex=-1 role=dialog><div class=aside-dialog><div class=aside-content><div class=aside-header ng-show=title><button type=button class=close ng-click=$hide()>&times;</button><h4 class=aside-title ng-bind=title></h4></div><div class=aside-body ng-bind=content></div><div class=aside-footer><button type=button class="btn btn-default" ng-click=$hide()>Close</button></div></div></div></div>'),e.put("/bower_components/angular-strap/src/datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class=text-center><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click=$selectPane(-1)><i class={{$iconLeft}}></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex=-1 type=button class="btn btn-default btn-block text-strong" ng-click=$toggleMode()><strong style="text-transform: capitalize" ng-bind=title></strong></button></th><th><button tabindex=-1 type=button class="btn btn-default pull-right" ng-click=$selectPane(+1)><i class={{$iconRight}}></i></button></th></tr><tr ng-show=showLabels ng-bind-html=labels></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class=text-center ng-repeat="(j, el) in row"><button tabindex=-1 type=button class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click=$select(el.date) ng-disabled=el.disabled><span ng-class="{\'text-muted\': el.muted}" ng-bind=el.label></span></button></td></tr></tbody></table></div>'),e.put("/bower_components/angular-strap/src/dropdown/dropdown.tpl.html",'<ul tabindex=-1 class=dropdown-menu role=menu><li role=presentation ng-class="{divider: item.divider}" ng-repeat="item in content"><a role=menuitem tabindex=-1 ng-href={{item.href}} ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind=item.text></a> <a role=menuitem tabindex=-1 href=javascript:void(0) ng-if="!item.divider && item.click" ng-click=$eval(item.click);$hide() ng-bind=item.text></a></li></ul>'),e.put("/bower_components/angular-strap/src/modal/modal.tpl.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header ng-show=title><button type=button class=close ng-click=$hide()>&times;</button><h4 class=modal-title ng-bind=title></h4></div><div class=modal-body ng-bind=content></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=$hide()>Close</button></div></div></div></div>'),e.put("/bower_components/angular-strap/src/popover/popover.tpl.html","<div class=popover><div class=arrow></div><h3 class=popover-title ng-bind=title ng-show=title></h3><div class=popover-content ng-bind=content></div></div>"),e.put("/bower_components/angular-strap/src/select/select.tpl.html",'<ul tabindex=-1 class="select dropdown-menu" ng-show=$isVisible() role=select><li ng-if=$showAllNoneButtons><div class=btn-group style="margin-bottom: 5px; margin-left: 5px"><button type=button class="btn btn-default btn-xs" ng-click=$selectAll()>{{$allText}}</button> <button type=button class="btn btn-default btn-xs" ng-click=$selectNone()>{{$noneText}}</button></div></li><li role=presentation ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role=menuitem tabindex=-1 ng-click="$select($index, $event)"><i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i> <span ng-bind=match.label></span></a></li></ul>'),e.put("/bower_components/angular-strap/src/tab/tab.tpl.html",'<ul class=nav ng-class=$navClass role=tablist><li ng-repeat="$pane in $panes track by $index" ng-class="$index == $panes.$active ? $activeClass : \'\'"><a role=tab data-toggle=tab ng-click=$setActive($index) data-index="{{ $index }}" ng-bind-html=$pane.title></a></li></ul><div ng-transclude class=tab-content></div>'),e.put("/bower_components/angular-strap/src/timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height=100%><thead><tr class=text-center><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class=text-center><button tabindex=-1 style="width: 100%" type=button class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled=row[0].disabled><span ng-class="{\'text-muted\': row[0].muted}" ng-bind=row[0].label></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class=text-center><button tabindex=-1 ng-if=row[1].date style="width: 100%" type=button class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled=row[1].disabled><span ng-class="{\'text-muted\': row[1].muted}" ng-bind=row[1].label></span></button></td><td ng-if=showAM>&nbsp;</td><td ng-if=showAM><button tabindex=-1 ng-show="i == midIndex - !isAM * 1" style="width: 100%" type=button ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click=$switchMeridian() ng-disabled=el.disabled>AM</button> <button tabindex=-1 ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type=button ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click=$switchMeridian() ng-disabled=el.disabled>PM</button></td></tr></tbody><tfoot><tr class=text-center><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex=-1 type=button class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>'),e.put("/bower_components/angular-strap/src/tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show=title><div class=tooltip-arrow></div><div class=tooltip-inner ng-bind=title></div></div>'),e.put("/bower_components/angular-strap/src/typeahead/typeahead.tpl.html",'<ul tabindex=-1 class="typeahead dropdown-menu" ng-show=$isVisible() role=select><li role=presentation ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role=menuitem tabindex=-1 ng-click="$select($index, $event)" ng-bind=match.label></a></li></ul>'),e.put("/bower_components/angular-strap-patches/src/dropdown/dropdown.tpl.html",'<ul tabindex=-1 class=dropdown-menu role=menu ng-controller="DropdownCtrl as vm"><li role=presentation ng-repeat="item in content" ng-class="{divider: item.divider}" ng-click=vm.execute(item) ng-hide=vm.hide(item) ng-show=vm.show(item)><a ng-if=item.template compile=item.template></a> <a ng-if="item.templateArray && !vm.model[item.field]" compile=item.templateArray[0]></a> <a ng-if="item.templateArray && vm.model[item.field]" compile=item.templateArray[1]></a></li></ul>')}]),function(){"use strict";function e(e,t,a){var n=this;n.tl=t.tileLayer,n.availableTileLayer=a,n.cancel=function(){e.dismiss()},n.close=function(){e.close(n.tl)}}angular.module("mappifyApp.sidebar.tileLayer",[]).controller("TileLayerCtrl",e),e.$inject=["$modalInstance","tileLayer","availableTileLayer"]}(),function(){"use strict";function e(e,t){var a=this;a.search={},a.availableMarkerStyles=t,a.unSelectedColor="#3887be",a.selectedColor="#56b881",a.icon="flask",a.cancel=function(){e.dismiss()},a.close=function(){e.close(a.tl)}}angular.module("mappifyApp.sidebar.markerStyle",[]).controller("MarkerStyleCtrl",e),e.$inject=["$modalInstance","availableMarkerStyles"]}(),function(){"use strict";function e(e){var t=this;t.json="",t.cancel=function(){e.dismiss()},t.close=function(){e.close(t.json)}}angular.module("mappifyApp.sidebar.load",[]).controller("LoadCtrl",e),e.$inject=["$modalInstance"]}(),function(){"use strict";function e(e,t){var a=this;a.layout=t,a.cancel=function(){e.dismiss()},a.close=function(){e.close(a.layout)}}angular.module("mappifyApp.sidebar.layout",[]).controller("LayoutCtrl",e),e.$inject=["$modalInstance","layout"]}(),function(){"use strict";function e(e,t){function a(){var e=new Blob([n.config],{type:"application/json"});return URL.createObjectURL(e)}var n=this;n.config=t,n.blobURL=a(),n.cancel=function(){e.dismiss()},n.close=function(){e.close(n.json)}}angular.module("mappifyApp.sidebar.download",[]).controller("DownloadCtrl",e).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}]),e.$inject=["$modalInstance","config"]}(),function(){"use strict";function e(e,t){function a(){function e(e){return _.find(t,function(t){return t.id===e})}null!==n.selectedService&&(n.ds.service=e(n.selectedService))}var n=this;n.ds={},n.selectedService=null,n.availableServices=t,n.toggleServiceSelection=function(e){n.selectedService=e===n.selectedService?null:e},n.isServiceSelected=function(e){return e===n.selectedService},n.cancel=function(){e.dismiss()},n.close=function(){a(),e.close(n.ds)}}angular.module("mappifyApp.sidebar.dataSource",["zenubu.input"]).controller("DataSourceCtrl",e),e.$inject=["$modalInstance","availableServices"]}(),function(){"use strict";function e(){function e(e,t,a){var n={},i=jassa.geo.GeoDataSourceUtils.createGeoDataSourceLabels(e,t,a,n);return i}function t(e){return jassa.sparql.ConceptUtils.createTypeConcept(e)}function a(e,t){var a=jassa.service.SparqlServiceBuilder.http(e,t,{type:"POST"}).cache().virtFix().paginate(1e3).pageExpand(100).create();return a}function n(e){if(e=e.toLowerCase(),"wgs84"===e)return jassa.geo.GeoMapFactoryUtils.wgs84MapFactory;if("wkt"===e)return jassa.geo.GeoMapFactoryUtils.createWktMapFactory("http://www.w3.org/2003/01/geo/wgs84_pos#geometry","bif:st_intersects","bif:st_geomFromText");throw new Error("unsupported GeoMapFactory type")}var i=this;i.create=function(){var i=a("http://akswnc3.informatik.uni-leipzig.de/data/dbpedia/sparql",["http://dbpedia.org"]),l=n("wkt"),o=t("http://dbpedia.org/ontology/University"),s=e(i,l,o);return s}}angular.module("mappifyApp.service.jassaDataSourceFactory",[]).service("jassaDataSourceFactory",e)}(),function(){"use strict";function e(e,t){function a(e){return e.data}function n(e){return i=a(e)}var i,l=this,o={FETCH:"data/tileLayer.json"};l.getTileLayers=function(){return i?t.when(i):e.get(o.FETCH).then(n)}}angular.module("mappifyApp.models.tileLayer",[]).service("tileLayerModel",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(){function e(e){return angular.copy(e&&s.hasOwnProperty(e)?s[e]:s)}function t(e){s.layout.zoom=e}function a(e,t){s.layout.viewCenter.latitude=e,s.layout.viewCenter.longitude=t}function n(e){s=JSON.parse(e)}function i(e){s.tileLayer=e}function l(e){s.dataSources=s.dataSources||[];var t=_.findIndex(s.dataSources,function(t){return t.displayName===e.displayName});-1===t?s.dataSources.push(e):s.dataSources[t]=e}var o=this,s={layout:{viewCenter:{latitude:51.339018,longitude:12.3797776},zoom:15},tileLayer:{google:{"true":!1}}};return o.setZoom=t,o.setViewCenter=a,o.getCurrentConfig=e,o.loadConfigModelFromJSON=n,o.setTileLayer=i,o.setSetDataSource=l,o}angular.module("mappifyApp.models.scaffoldingConfigModel",[]).service("scaffoldingConfigModel",e)}(),function(){"use strict";function e(e,t){function a(e){return e.data.icons}function n(e){return i=a(e)}var i,l=this,o={FETCH:"data/markerStyle.json"};l.getMarkerStyles=function(){return i?t.when(i):e.get(o.FETCH).then(n)}}angular.module("mappifyApp.models.markerStyleModel",[]).service("markerStyleModel",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e){function t(){var t=e.getCurrentConfig();return a.zoom=t.layout.zoom,a.viewCenter=t.layout.viewCenter,a}var a={},n={};return n.createMapConfigFromScafoldingConfig=t,n}angular.module("mappifyApp.models.mapConfigModel",["mappifyApp.models.scaffoldingConfigModel"]).factory("mapConfigModel",e),e.$inject=["scaffoldingConfigModel"]}(),function(){"use strict";function e(e,t){function a(e){return e.data}function n(e){return i=a(e)}var i,l=this,o={FETCH:"data/dataSourceService.json"};l.getDataSourceServices=function(){return i?t.when(i):e.get(o.FETCH).then(n)},l.getDataSourceServiceByName=function(e){function a(){return _.find(i,function(t){return t.displayName===e})}var n=t.defer();return i?n.resolve(a(e)):l.getDataSourceServices().then(function(){n.resolve(a(e))}),n.promise}}angular.module("mappifyApp.models.dataSourceService",[]).service("dataSourceServiceModel",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){var a=this;a.changeDataSource=t.changeDataSource,a.changeLayout=t.changeLayout,a.changeTileLayers=t.changeTileLayers,a.downloadConfig=t.downloadConfig,a.getConfigModel=e.getCurrentConfig,a.loadConfig=t.loadConfig,a.selectMarkerStyle=t.selectMarkerStyle,a.selectMarkerStyle()}angular.module("mappifyApp.sidebar",["ui.router","mappifyApp.sidebar.layout","mappifyApp.sidebar.configService","mappifyApp.sidebar.load","mappifyApp.sidebar.download","mappifyApp.sidebar.tileLayer","mappifyApp.sidebar.dataSource","mappifyApp.sidebar.markerStyle","mappifyApp.models.dataSourceService","mappifyApp.models.markerStyleModel","mappifyApp.models.mapConfigModel","mappifyApp.models.tileLayer","mappifyApp.models.scaffoldingConfigModel"]).controller("SidebarController",e),e.$inject=["scaffoldingConfigModel","configService"]}(),function(){"use strict";function e(e,t){function a(){return r({template:"/subsection-sidebar/modals/download/download.tpl.html",controller:"DownloadCtrl",controllerAs:"modal",resolve:{config:["scaffoldingConfigModel",function(e){return e.getCurrentConfig()}]}}).then(function(){})}function n(){return r({template:"/subsection-sidebar/modals/load/load.tpl.html",controller:"LoadCtrl",controllerAs:"modal"}).then(function(e){t.loadConfigModelFromJSON(e)})}function i(){return r({template:"/subsection-sidebar/modals/layout/layout.tpl.html",controller:"LayoutCtrl",controllerAs:"modal",resolve:{layout:["scaffoldingConfigModel",function(e){var t=e.getCurrentConfig("layout");return{zoom:t.zoom,lat:t.viewCenter.latitude,lng:t.viewCenter.longitude}}]}}).then(function(e){t.setZoom(e.zoom),t.setViewCenter(e.lat,e.lng)})}function l(){return r({template:"/subsection-sidebar/modals/dataSource/dataSource.tpl.html",controller:"DataSourceCtrl",controllerAs:"modal",resolve:{availableServices:["dataSourceServiceModel",function(e){return e.getDataSourceServices()}]}}).then(function(e){t.setSetDataSource(e)})}function o(){return r({template:"/subsection-sidebar/modals/tileLayer/tileLayer.tpl.html",controller:"TileLayerCtrl",controllerAs:"modal",resolve:{tileLayer:["scaffoldingConfigModel",function(e){var t=e.getCurrentConfig("tileLayer");return{tileLayer:t}}],availableTileLayer:["tileLayerModel",function(e){return e.getTileLayers()}]}}).then(function(e){t.setTileLayer(e)})}function s(){return r({template:"/subsection-sidebar/modals/markerStyle/markerStyle.tpl.html",controller:"MarkerStyleCtrl",controllerAs:"modal",resolve:{availableMarkerStyles:["markerStyleModel",function(e){return e.getMarkerStyles()}]}}).then(function(){})}function r(t){return e.open(t).then(function(e){return e.result})}var c={};return c.changeLayout=i,c.changeTileLayers=o,c.changeDataSource=l,c.downloadConfig=a,c.loadConfig=n,c.selectMarkerStyle=s,c}angular.module("mappifyApp.sidebar.configService",["mappifyApp.models.scaffoldingConfigModel"]).factory("configService",e),e.$inject=["$modal","scaffoldingConfigModel"]}(),function(){"use strict";function e(e,a,n){var i=this;i.showMap=!0,i.getMapConfig=function(){return e.createMapConfigFromScafoldingConfig()},i.getDataSource=function(){return t(i.getMapConfig(),n)},i.refreshConfig=function(){i.showMap=!1,i.config=i.getMapConfig(),i.datasource=i.getDataSource(),a(function(){i.showMap=!0},500)},i.config={viewCenter:{latitude:51.339018,longitude:12.3797776},zoom:15},i.datasource={},i.datasource.fetchData=function(){return[]}}function t(e,t){var a=t.create(e);return[a]}angular.module("mappifyApp.main",["ui.router","mappifyApp.service.jassaDataSourceFactory"]).controller("MainController",e),e.$inject=["mapConfigModel","$timeout","jassaDataSourceFactory"]}();